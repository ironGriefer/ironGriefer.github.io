var Yt=Object.defineProperty;var Ut=(e,t,i)=>t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var ut=(e,t,i)=>(Ut(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function i(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=i(a);fetch(a.href,c)}})();function tt(){}function Bt(e){return e()}function Et(){return Object.create(null)}function it(e){e.forEach(Bt)}function vt(e){return typeof e=="function"}function Gt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ht(e){return Object.keys(e).length===0}function d(e,t){e.appendChild(t)}function Dt(e,t,i){e.insertBefore(t,i||null)}function yt(e){e.parentNode&&e.parentNode.removeChild(e)}function Xt(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function w(e){return document.createElement(e)}function B(e){return document.createTextNode(e)}function C(){return B(" ")}function V(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function y(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function dt(e){return e===""?null:+e}function Kt(e){return Array.from(e.childNodes)}function q(e,t){t=""+t,e.data!==t&&(e.data=t)}function L(e,t){e.value=t??""}let et;function Q(e){et=e}function Jt(){if(!et)throw new Error("Function called outside component initialization");return et}function Qt(e){Jt().$$.on_mount.push(e)}const H=[],kt=[];let K=[];const xt=[],Zt=Promise.resolve();let pt=!1;function te(){pt||(pt=!0,Zt.then(Nt))}function gt(e){K.push(e)}const ft=new Set;let W=0;function Nt(){if(W!==0)return;const e=et;do{try{for(;W<H.length;){const t=H[W];W++,Q(t),ee(t.$$)}}catch(t){throw H.length=0,W=0,t}for(Q(null),H.length=0,W=0;kt.length;)kt.pop()();for(let t=0;t<K.length;t+=1){const i=K[t];ft.has(i)||(ft.add(i),i())}K.length=0}while(H.length);for(;xt.length;)xt.pop()();pt=!1,ft.clear(),Q(e)}function ee(e){if(e.fragment!==null){e.update(),it(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(gt)}}function ie(e){const t=[],i=[];K.forEach(s=>e.indexOf(s)===-1?t.push(s):i.push(s)),i.forEach(s=>s()),K=t}const ne=new Set;function se(e,t){e&&e.i&&(ne.delete(e),e.i(t))}function Mt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function re(e,t,i){const{fragment:s,after_update:a}=e.$$;s&&s.m(t,i),gt(()=>{const c=e.$$.on_mount.map(Bt).filter(vt);e.$$.on_destroy?e.$$.on_destroy.push(...c):it(c),e.$$.on_mount=[]}),a.forEach(gt)}function oe(e,t){const i=e.$$;i.fragment!==null&&(ie(i.after_update),it(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function le(e,t){e.$$.dirty[0]===-1&&(H.push(e),te(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ae(e,t,i,s,a,c,u=null,n=[-1]){const r=et;Q(e);const o=e.$$={fragment:null,ctx:[],props:c,update:tt,not_equal:a,bound:Et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:Et(),dirty:n,skip_bound:!1,root:t.target||r.$$.root};u&&u(o.root);let l=!1;if(o.ctx=i?i(e,t.props||{},(h,f,...m)=>{const b=m.length?m[0]:f;return o.ctx&&a(o.ctx[h],o.ctx[h]=b)&&(!o.skip_bound&&o.bound[h]&&o.bound[h](b),l&&le(e,h)),f}):[],o.update(),l=!0,it(o.before_update),o.fragment=s?s(o.ctx):!1,t.target){if(t.hydrate){const h=Kt(t.target);o.fragment&&o.fragment.l(h),h.forEach(yt)}else o.fragment&&o.fragment.c();t.intro&&se(e.$$.fragment),re(e,t.target,t.anchor),Nt()}Q(r)}class ce{constructor(){ut(this,"$$");ut(this,"$$set")}$destroy(){oe(this,1),this.$destroy=tt}$on(t,i){if(!vt(i))return tt;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const a=s.indexOf(i);a!==-1&&s.splice(a,1)}}$set(t){this.$$set&&!Ht(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const he="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(he);var F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mt={},_t={},S={};Object.defineProperty(S,"__esModule",{value:!0});S.Colors=S.EntityType=S.Environment=S.Movement=void 0;var St;(function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"})(St||(S.Movement=St={}));var Pt;(function(e){e[e.Browser=0]="Browser",e[e.Node=1]="Node"})(Pt||(S.Environment=Pt={}));var $t;(function(e){e[e.Polygon=0]="Polygon",e[e.Circle=1]="Circle"})($t||(S.EntityType=$t={}));var It;(function(e){e.Pink="#F177DD",e.LightRed="#FC7677",e.Red="#F14E54",e.Yellow="#FFE869",e.Peach="#FCC376",e.Orange="#FFA500",e.Green="#00E16E",e.BrightGreen="#43FF91",e.NeonGreen="#8AFF69",e.Blue="#00B2E1",e.DarkBlue="#768DFC",e.Purple="#BF7FF5",e.Gray="#C0C0C0",e.Black="#000000",e.White="#FFFFFF"})(It||(S.Colors=It={}));var A={};Object.defineProperty(A,"__esModule",{value:!0});A.ConfigurationError=A.InternalError=void 0;class ue extends Error{constructor(t){super("[SYSTEM]: Whoops, something went wrong! Please report it at our GitHub page: "+t),this.name="InternalError"}}A.InternalError=ue;class de extends Error{constructor(t){super("[SYSTEM]: An error occurred when configuring an Entity or the System: "+t),this.name="ConfigurationError"}}A.ConfigurationError=de;var ot={};Object.defineProperty(ot,"__esModule",{value:!0});const fe=A,me=(e,t)=>e+t*46340;class pe{constructor(t,i){if(this.cells=new Map,!Number.isInteger(i)||i>=32)throw new fe.ConfigurationError("Could not initialize SpatialHashGrid: Cell size must be an integer value less than 32.");this.system=t,this.cellSize=i}insert(t,i,s,a,c){const u=t>>this.cellSize,n=i>>this.cellSize,r=t+s>>this.cellSize,o=i+a>>this.cellSize;for(let l=u;l<=r;l++)for(let h=n;h<=o;h++){const f=me(l,h);this.cells.get(f)||this.cells.set(f,[]),this.cells.get(f).push(c)}}query(){for(const t of this.cells.values()){const i=t.length;if(!(i<2))for(let s=0;s<i;s++)for(let a=s+1;a<i;a++){const c=this.system.entities[t[s]],u=this.system.entities[t[a]];c.sleeping&&u.sleeping||this.system.CollisionResolver.detect(c,u)}}}clear(){this.cells.clear()}}ot.default=pe;var lt={};Object.defineProperty(lt,"__esModule",{value:!0});const Y=S;class Z{detect(t,i){if(t.components.length&&i.components.length){for(const s of t.components)for(const a of i.components)if(this.detectSimple(s,a))break;return}else if(t.components.length||i.components.length){const s=t.components.length?t:i,a=t.components.length?i:t;for(const c of s.components)if(this.detectSimple(c,a))break}else this.detectSimple(t,i)}detectSimple(t,i){if(t.type===Y.EntityType.Circle&&i.type===Y.EntityType.Circle)return this.detectCircleCircle(t,i);if(t.type===Y.EntityType.Circle||i.type===Y.EntityType.Circle){const r=t.type===Y.EntityType.Circle?t:i,o=t.type===Y.EntityType.Circle?i:t;return this.detectCirclePolygon(r,o)}let s=1/0,a;const c=t.vertices,u=i.vertices,n=c.length+u.length;for(let r=0;r<n;r++){let o;if(r<c.length?o=c[r].clone.subtract(c[(r+1)%c.length]).orthogonal.normalize():o=u[r-c.length].clone.subtract(u[(r+1)%u.length]).orthogonal.normalize(),o.x===0&&o.y===0)continue;const[l,h]=Z.project(o,c),[f,m]=Z.project(o,u),b=Math.min(h,m)-Math.max(l,f);if(b<=0)return!1;b<s&&(a=o,s=b)}return a?(this.resolve(t.parent||t,i.parent||i,Math.max(t.elasticity,i.elasticity),s,a),t.lastCollisionFrame=t.tick,i.lastCollisionFrame=i.tick,!0):!1}detectCirclePolygon(t,i){const s=i.vertices;let a=1/0,c;for(let u=0;u<s.length;u++){const n=s[u],o=s[(u+1)%s.length].clone.subtract(n).orthogonal.normalize();if(o.x===0&&o.y===0)continue;const[l,h]=Z.project(o,s),f=t.position.dot(o),m=Math.min(h,f+t.radius)-Math.max(l,f-t.radius);if(m<=0)return!1;m<a&&(a=m,c=o)}return c?(this.resolve(t.parent||t,i.parent||i,Math.max(t.elasticity,i.elasticity),a,c),t.lastCollisionFrame=t.tick,i.lastCollisionFrame=i.tick,!0):!1}detectCircleCircle(t,i){const s=t.position.distance(i.position),a=t.radius+i.radius-s,c=t.position.clone.subtract(i.position).normalize();return a<=0?!1:c?(this.resolve(t.parent||t,i.parent||i,Math.max(t.elasticity,i.elasticity),a,c),t.lastCollisionFrame=t.tick,i.lastCollisionFrame=i.tick,!0):!1}static project(t,i){let s=1/0,a=-1/0;for(const c of i){const u=c.dot(t);s=Math.min(s,u),a=Math.max(a,u)}return[s,a]}resolve(t,i,s,a,c){var u,n,r,o,l,h,f,m;(n=(u=t.hooks).preResolve)===null||n===void 0||n.call(u,i),(o=(r=i.hooks).preResolve)===null||o===void 0||o.call(r,t),t.position.dot(c)<i.position.dot(c)&&c.scale(-1);const b=t.velocity,_=i.velocity,P=t.mass,v=i.mass,p=b.clone.subtract(_).dot(c),R=-(1+s)*p/(1/P+1/v),k=c.clone.scale(R);t.static||t.velocity.add(k.clone.scale(1/P)),i.static||i.velocity.subtract(k.clone.scale(1/v)),!t.static&&!i.static&&(t.angularVelocity+=1/t.inertia*t.position.clone.subtract(i.position).cross(k),i.angularVelocity-=1/i.inertia*t.position.clone.subtract(i.position).cross(k));const O=c.clone.scale(a/(1/P+1/v));t.static||t.updatePosition(O.clone.scale(1/P)),i.static||i.updatePosition(O.clone.scale(-1/v)),(h=(l=t.hooks).postResolve)===null||h===void 0||h.call(l,i),(m=(f=i.hooks).postResolve)===null||m===void 0||m.call(f,t)}}lt.default=Z;var at={},J={};Object.defineProperty(J,"__esModule",{value:!0});class X{constructor(t,i){this.x=0,this.y=0,this.x=t,this.y=i}static toCartesian(t,i){return new X(t*Math.cos(i),t*Math.sin(i))}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}scale(t){return this.x*=t,this.y*=t,this}normalize(){const t=this.magnitude;return t===0?this.x=this.y=0:(this.x/=t,this.y/=t),this}distance(t){return this.clone.subtract(t).magnitude}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}project(t){return t.x===0&&t.y===0?new X(0,0):t.clone.scale(this.dot(t)/t.magnitudeSq)}get orthogonal(){return new X(-this.y,this.x)}angle(t={x:0,y:0}){return Math.atan2(this.y-t.y,this.x-t.x)}rotate(t){const i=this.magnitude;return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this}get magnitude(){return Math.sqrt(this.magnitudeSq)}set magnitude(t){const i=this.angle();this.x=t*Math.cos(i),this.y=t*Math.sin(i)}get magnitudeSq(){return this.x*this.x+this.y*this.y}get clone(){return new X(this.x,this.y)}}J.default=X;var ge=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(at,"__esModule",{value:!0});const Rt=ge(J);class ve{setCenter(t){this.position.x=t.x,this.position.y=t.y}getSystemCoordinates(t){}constructor({position:t,zoom:i},s){this.position=new Rt.default(0,0),this.zoom=1,this.setCenter(t||new Rt.default(0,0)),this.zoom=i||1,this.system=s}}at.default=ve;var ct={};Object.defineProperty(ct,"__esModule",{value:!0});const Tt=S,ye=A;class _e{constructor(t,i){if(this.framerate={fpsArr:[],fps:0,dt:0,lastUpdate:0},this.system=i,!t||!t.canvas)return;this.canvas=t.canvas;const s=this.canvas.getContext("2d");if(!s)throw new ye.ConfigurationError("Could not configure Renderer: Your browser does not support CanvasRenderingContext2D.");this.context=s,window.addEventListener("resize",()=>{this.canvas.width=window.innerWidth*window.devicePixelRatio,this.canvas.height=window.innerHeight*window.devicePixelRatio}),window.dispatchEvent(new Event("resize")),this.configure(t),requestAnimationFrame(this.render.bind(this))}configure(t){this.rendering={canvas:this.canvas,background:t.background||Tt.Colors.White,hooks:t.hooks||{},gridSize:t.gridSize||0,gridColor:t.gridColor||Tt.Colors.Black,gridWidth:t.gridWidth||1}}render(){var t,i,s,a,c,u,n,r;this.framerate.dt=performance.now()-this.framerate.lastUpdate,this.framerate.lastUpdate=performance.now(),this.framerate.fpsArr.length>30&&this.framerate.fpsArr.shift(),this.framerate.fpsArr.push(this.framerate.dt);let o=0;for(const l of this.framerate.fpsArr)o+=l;if(this.framerate.fps=Math.round(1e3/(o/this.framerate.fpsArr.length)),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.context.fillStyle=this.rendering.background,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.rendering.gridSize!==0){this.context.strokeStyle=this.rendering.gridColor,this.context.lineWidth=this.rendering.gridWidth;for(let l=0;l<this.canvas.width;l+=this.rendering.gridSize)this.context.beginPath(),this.context.moveTo(l,0),this.context.lineTo(l,this.canvas.height),this.context.stroke();for(let l=0;l<this.canvas.height;l+=this.rendering.gridSize)this.context.beginPath(),this.context.moveTo(0,l),this.context.lineTo(this.canvas.width,l),this.context.stroke()}this.context.strokeStyle=this.rendering.gridColor,this.context.translate(this.canvas.width/2,this.canvas.height/2),this.context.scale(this.system.camera.zoom,this.system.camera.zoom),(i=(t=this.rendering.hooks).preRender)===null||i===void 0||i.call(t,this.context);for(const l of this.system.entities)l&&(this.context.save(),(a=(s=l.rendering.hooks).preRender)===null||a===void 0||a.call(s,l,this.context),l.render(this.context),(u=(c=l.rendering.hooks).postRender)===null||u===void 0||u.call(c,l,this.context),this.context.restore());this.context.restore(),(r=(n=this.rendering.hooks).postRender)===null||r===void 0||r.call(n,this.context),requestAnimationFrame(this.render.bind(this))}}ct.default=_e;var wt={};Object.defineProperty(wt,"__esModule",{value:!0});class we{constructor(){this.events={}}on(t,i){this.events[t]||(this.events[t]=[]),this.events[t].push(i)}emit(t,...i){if(this.events[t])for(const s of this.events[t])s(...i)}}wt.default=we;var nt=F&&F.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_t,"__esModule",{value:!0});const U=S,Ft=A,be=nt(ot),Ce=nt(lt),Ee=nt(at),ke=nt(ct),xe=nt(wt);class Me extends xe.default{get momentum(){let t=0;for(const i of this.entities)i&&(t+=i.velocity.magnitude*i.mass+Math.abs(i.angularVelocity*i.inertia)*i.mass);return t}get kineticEnergy(){let t=0;for(const i of this.entities)i&&(t+=.5*i.mass*(i.velocity.magnitude*i.velocity.magnitude));return t}get nextId(){const t=this.entities.indexOf(void 0);return t!==-1?t:this.entities.length}constructor(t){var i,s;if(super(),this.width=null,this.height=null,this.friction=.1,this.gravity=0,this.CollisionResolver=new Ce.default,this.entities=[],this.verbose=!1,this.tick=0,this.tickRate=0,this.environment=U.Environment.Browser,this.performance={worldUpdateRate:0,memoryUsage:0},this.environment=typeof window>"u"?U.Environment.Node:U.Environment.Browser,this.config=t,this.width=((i=t.dimensions)===null||i===void 0?void 0:i.x)||null,this.height=((s=t.dimensions)===null||s===void 0?void 0:s.y)||null,this.width&&!this.height||this.height&&!this.width)throw new Ft.ConfigurationError("Both dimensions must be specified for the system.");if(this.friction=t.friction===void 0?.1:t.friction,this.gravity=t.gravity===void 0?0:t.gravity,this.camera=new Ee.default(t.camera||{},this),this.renderer=new ke.default(t.render,this),this.verbose=t.verbose||!1,!t.collisionInfo)throw new Ft.ConfigurationError("Collision information must be specified for the system.");if(this.CollisionManager=new be.default(this,t.collisionInfo.cellSize||12),this.verbose&&console.log("[PHYSICS]: Engine started."),this.environment===U.Environment.Browser&&t.useRAF!==!1){requestAnimationFrame(this.update.bind(this));return}this.tickRate=t.tickRate||60,setInterval(this.update.bind(this),1e3/this.tickRate)}setCollisionEngine(t){this.CollisionManager=t}update(){var t;const i=performance.now();this.CollisionManager.clear();for(const s of this.entities){if(!s)return;this.CollisionManager.insert(s.bounds.min.x,s.bounds.min.y,s.hitbox.x,s.hitbox.y,s.id),s.update()}this.CollisionManager.query(),this.tick++,this.performance.worldUpdateRate=performance.now()-i,this.performance.memoryUsage=this.environment===U.Environment.Browser?((t=performance.memory)===null||t===void 0?void 0:t.usedJSHeapSize)/1024/1024:process.memoryUsage().heapUsed/1024/1024,this.environment===U.Environment.Browser&&this.config.useRAF!==!1&&requestAnimationFrame(this.update.bind(this))}addEntity(t){const i=this.nextId;return t.id=i,this.entities[i]=t,this.emit("entityCreate",t),t}removeEntity(t){return this.entities[t.id]=void 0,this.emit("entityDelete",t),t}}_t.default=Me;var st={},At;function Lt(){if(At)return st;At=1;var e=F&&F.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(st,"__esModule",{value:!0});const t=S,i=A,s=e(J),a=Wt();let c=class qt{get sleeping(){return this.tick-this.lastCollisionFrame>5&&Math.abs(this.velocity.x)<this.sleepThreshold&&Math.abs(this.velocity.y)<this.sleepThreshold&&Math.abs(this.angularVelocity)<this.sleepThreshold}get hitbox(){return this.bounds.max.subtract(this.bounds.min)}get inertia(){if(this.static)return 0;const n=this.vertices;let r=0;for(let o=0;o<n.length;o++){const l=n[o],h=n[(o+1)%n.length],f=l.cross(l)+h.cross(h),m=l.cross(h);r+=f+m}return Math.abs(r)/12}get angle(){return this._angle}set angle(n){if(n===this._angle||this.info.rotate===!1)return;const r=n-this._angle,o=Math.cos(r),l=Math.sin(r);this._angle=n;for(let h=0;h<this.vertices.length;h++){const f=this.vertices[h].x-this.position.x,m=this.vertices[h].y-this.position.y,b=f*o-m*l,_=f*l+m*o;this.vertices[h].x=b+this.position.x,this.vertices[h].y=_+this.position.y}}get bounds(){let n=1/0,r=1/0,o=-1/0,l=-1/0;for(const h of this.vertices){const f=h.x,m=h.y;n=n>f?f:n,r=r>m?m:r,o=o<f?f:o,l=l<m?m:l}return this.position===void 0&&(this.position=new s.default((n+o)/2,(r+l)/2)),{min:new s.default(n,r),max:new s.default(o,l)}}get area(){let n=0;for(let r=0;r<this.vertices.length;r++)n+=this.vertices[r].cross(this.vertices[(r+1)%this.vertices.length]);return Math.abs(n/2)}constructor(n,r){if(this.tick=0,this.lastCollisionFrame=0,this.sleepThreshold=-1,this.type=t.EntityType.Polygon,this.velocity=new s.default(0,0),this.acceleration=new s.default(0,0),this.angularVelocity=0,this.angularSpeed=0,this.components=[],this.parent=null,this.hooks={},this._angle=0,this.info=n,this.system=r,this.vertices=this.initializeVertices(n),this.bounds,this.mass=n.mass,this.speed=n.speed,this.angularSpeed=n.angularSpeed||0,this.elasticity=Math.max(0,n.elasticity)||0,this.static=!!n.static,this.sleepThreshold=n.sleepThreshold===void 0?-1:n.sleepThreshold,!this.mass&&this.mass!==0&&(this.mass=1,console.warn("[SYSTEM]: Entity mass defaulted to 1 due to a zero quantity being provided.")),this.configure(n.render||{}),this.hooks=n.hooks||{},!r)throw new i.ConfigurationError("No system was provided for the entity.")}initializeVertices(n){if(!n.form)throw new i.ConfigurationError("No form was provided for the entity.");let r=[];if(n.form.components)for(const o of n.form.components){if(o.form.components)throw new i.ConfigurationError("Components cannot have components.");const l=o.radius?new a.Circle(o,this.system):new qt(o,this.system);l.parent=this,this.components.push(l),r.push(...l.vertices)}else if(n.form.vertices)r=n.form.vertices;else if(n.form.sides){const o=[],l=n.form.radius;if(!l)throw new i.ConfigurationError("No radius was provided for the entity.");const h=Math.PI*2/n.form.sides;for(let f=0;f<n.form.sides;f++){const m=h*f+(n.form.rotation||0);o.push(s.default.toCartesian(l,m).add(n.form.offset||{x:0,y:0}))}r=o}else throw new i.ConfigurationError("No form was provided for the entity.");return r}configure(n){this.rendering={strokeColor:n.strokeColor,fillColor:n.fillColor,strokeWidth:n.strokeWidth||1,glowIntensity:n.glowIntensity,glowColor:n.glowColor,hooks:n.hooks||{}}}rotate(...n){for(const r of n)switch(r){case t.Movement.Up:this.angularVelocity+=this.angularSpeed;break;case t.Movement.Down:this.angularVelocity-=this.angularSpeed;break;case t.Movement.Left:this.angularVelocity-=this.angularSpeed;break;case t.Movement.Right:this.angularVelocity+=this.angularSpeed;break;default:console.error("[SYSTEM]: Invalid angular movement key.");break}}move(...n){for(const r of n)switch(r){case t.Movement.Up:this.acceleration.y+=this.speed;break;case t.Movement.Down:this.acceleration.y-=this.speed;break;case t.Movement.Left:this.acceleration.x-=this.speed;break;case t.Movement.Right:this.acceleration.x+=this.speed;break;default:console.error("[SYSTEM]: Invalid movement key.");break}this.acceleration.normalize().scale(this.speed),this.velocity.add(this.acceleration)}update(){this.static&&(this.velocity.x=this.velocity.y=this.angularVelocity=0),this.system.gravity&&!this.static&&(this.velocity.y-=this.system.gravity),this.velocity.scale(1-this.system.friction),this.angularVelocity*=1-this.system.friction,this.updatePosition(this.velocity),this.angle+=this.angularVelocity/100,this.acceleration.scale(0),this.tick++,this.system.emit("entityUpdate",this)}updatePosition(n){if(this.static)return;const r=this.system.width,o=this.system.height;if(r&&o){const l=r/2,h=o/2;this.position.x+n.x>l?n.x=l-this.position.x:this.position.x+n.x<-l&&(n.x=-l-this.position.x),this.position.y+n.y>h?n.y=h-this.position.y:this.position.y+n.y<-h&&(n.y=-h-this.position.y)}this.position.add(n);for(const l of this.vertices)l.add(n)}determineColors(){let n,r;const o=this;return o.rendering.strokeColor&&(n=o.rendering.strokeColor),o.rendering.fillColor&&(r=o.rendering.fillColor),!n&&!r&&(n=t.Colors.Black),{stroke:n,fill:r}}render(n){const{stroke:r,fill:o}=this.determineColors();if(this.rendering.glowIntensity&&(n.shadowBlur=this.rendering.glowIntensity,n.shadowColor=this.rendering.glowColor||r||o),n.beginPath(),r&&(n.strokeStyle=r),o&&(n.fillStyle=o),n.lineWidth=this.rendering.strokeWidth||1,this.components.length)for(const l of this.components)l.render(n);else for(const l of this.vertices)n.lineTo(l.x,-l.y);n.closePath(),o&&n.fill(),r&&n.stroke()}};return st.default=c,st}var rt={},Ot;function Se(){if(Ot)return rt;Ot=1;var e=F&&F.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(rt,"__esModule",{value:!0});const t=e(Lt()),i=S,s=A,a=e(J);let c=class extends t.default{get bounds(){const n=this.position||this.vertices[0];return this.position===void 0&&(this.position=n),{min:new a.default(n.x-this.radius,n.y-this.radius),max:n,dimensions:this.hitbox}}get radius(){return this._radius}set radius(n){if(n<=0)throw new s.ConfigurationError("The radius of a circle must be greater than 0.");this._radius=n}get hitbox(){return new a.default(this.radius*2,this.radius*2)}get inertia(){return this.static?0:this.mass*this.radius*this.radius/2}constructor(n,r){super(n,r),this.type=i.EntityType.Circle,this._radius=0,this.radius=n.radius}rotate(){}render(n){const{stroke:r,fill:o}=this.determineColors();this.rendering.glowIntensity&&(n.shadowBlur=this.rendering.glowIntensity,n.shadowColor=this.rendering.glowColor||r||o),n.beginPath(),o&&(n.fillStyle=o),r&&(n.strokeStyle=r),n.lineWidth=this.rendering.strokeWidth||1,n.arc(this.position.x,-this.position.y,this.radius,0,2*Math.PI),n.closePath(),n.stroke(),o&&n.fill(),r&&n.stroke()}};return rt.default=c,rt}var jt;function Wt(){return jt||(jt=1,function(e){var t=F&&F.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.Colors=e.EntityType=e.Environment=e.Movement=e.Vector=e.Renderer=e.Camera=e.Collision=e.Circle=e.Entity=e.System=void 0;const i=t(_t);e.System=i.default;const s=t(lt),a=t(ot),c=t(Lt());e.Entity=c.default;const u=t(Se());e.Circle=u.default;const n=t(at);e.Camera=n.default;const r=t(ct);e.Renderer=r.default;const o=t(J);e.Vector=o.default;const l=S;Object.defineProperty(e,"Movement",{enumerable:!0,get:function(){return l.Movement}}),Object.defineProperty(e,"Environment",{enumerable:!0,get:function(){return l.Environment}}),Object.defineProperty(e,"EntityType",{enumerable:!0,get:function(){return l.EntityType}}),Object.defineProperty(e,"Colors",{enumerable:!0,get:function(){return l.Colors}});const h=typeof window<"u";e.Collision={CollisionResolver:s.default,SpatialHashGrid:a.default},h&&(window.Kinetics={System:i.default,Entity:c.default,Circle:u.default,Collision:e.Collision,Camera:n.default,Renderer:r.default,Vector:o.default,Movement:l.Movement,Environment:l.Environment,EntityType:l.EntityType,Colors:l.Colors})}(mt)),mt}var G=Wt();function zt(e,t,i){const s=e.slice();return s[10]=t[i][0],s[11]=t[i][1],s[12]=t[i][2],s[13]=t[i][3],s[14]=t[i][4],s[15]=t[i][5],s}function Vt(e){let t,i,s=e[10]+"",a,c,u,n=e[11]+"",r,o,l,h=e[12]+"",f,m,b,_=e[13]+"",P,v,g,p=e[14]+"",R,k,O,T=e[15]+"",D,j;return{c(){t=w("tr"),i=w("td"),a=B(s),c=C(),u=w("td"),r=B(n),o=C(),l=w("td"),f=B(h),m=C(),b=w("td"),P=B(_),v=C(),g=w("td"),R=B(p),k=C(),O=w("td"),D=B(T),j=C()},m($,I){Dt($,t,I),d(t,i),d(i,a),d(t,c),d(t,u),d(u,r),d(t,o),d(t,l),d(l,f),d(t,m),d(t,b),d(b,P),d(t,v),d(t,g),d(g,R),d(t,k),d(t,O),d(O,D),d(t,j)},p($,I){I&8&&s!==(s=$[10]+"")&&q(a,s),I&8&&n!==(n=$[11]+"")&&q(r,n),I&8&&h!==(h=$[12]+"")&&q(f,h),I&8&&_!==(_=$[13]+"")&&q(P,_),I&8&&p!==(p=$[14]+"")&&q(R,p),I&8&&T!==(T=$[15]+"")&&q(D,T)},d($){$&&yt(t)}}}function Pe(e){let t,i,s,a,c,u,n,r,o,l,h,f,m,b,_,P,v,g,p,R,k,O,T,D,j,$,I,ht,bt,N=Mt(e[3]),x=[];for(let M=0;M<N.length;M+=1)x[M]=Vt(zt(e,N,M));return{c(){t=w("div"),i=w("h1"),i.textContent="DAVID'S CENTRIPETAL MOTION SIMULATOR",s=C(),a=w("p"),a.textContent="One way to look at centripetal motion is that if one applies a constant acceleration perpendicular to an object's velocity, it will always form a circular motion. That's literally the entire point of this simulator. (idk how to do art so this is what im making)",c=C(),u=w("p"),u.textContent="The green vector represents the acceleration on the ball, and the blue arrow is the velocity.",n=C(),r=w("form"),o=w("label"),o.textContent="Centripetal Acceleration",l=C(),h=w("input"),f=C(),m=w("label"),m.textContent="Balls",b=C(),_=w("input"),P=C(),v=w("label"),v.textContent="Velocity",g=C(),p=w("input"),R=C(),k=w("canvas"),O=C(),T=w("button"),T.textContent="Pause Logging",D=C(),j=w("table"),$=w("tr"),$.innerHTML="<th>X</th> <th>Y</th> <th>Velocity X</th> <th>Velocity Y</th> <th>Acceleration X</th> <th>Acceleration Y</th>",I=C();for(let M=0;M<x.length;M+=1)x[M].c();y(o,"for","scale"),y(h,"type","range"),y(h,"id","scale"),y(h,"min","0.001"),y(h,"max","0.2"),y(h,"step","0.001"),y(m,"for","scale"),y(_,"type","range"),y(_,"id","scale"),y(_,"min","1"),y(_,"max","150"),y(_,"step","10"),y(v,"for","scale"),y(p,"type","range"),y(p,"id","scale"),y(p,"min","1"),y(p,"max","50"),y(p,"step","2"),y(r,"action",""),y(k,"id","canvas"),y(k,"width","1920"),y(k,"height","1080"),y(k,"class","svelte-w4tyox"),y(T,"id","pause"),y(t,"id","cool")},m(M,z){Dt(M,t,z),d(t,i),d(t,s),d(t,a),d(t,c),d(t,u),d(t,n),d(t,r),d(r,o),d(r,l),d(r,h),L(h,e[0]),d(r,f),d(r,m),d(r,b),d(r,_),L(_,e[1]),d(r,P),d(r,v),d(r,g),d(r,p),L(p,e[2]),d(t,R),d(t,k),d(t,O),d(t,T),d(t,D),d(t,j),d(j,$),d(j,I);for(let E=0;E<x.length;E+=1)x[E]&&x[E].m(j,null);ht||(bt=[V(h,"change",e[5]),V(h,"input",e[5]),V(_,"change",e[6]),V(_,"input",e[6]),V(p,"change",e[7]),V(p,"input",e[7]),V(T,"click",function(){vt(e[4])&&e[4].apply(this,arguments)})],ht=!0)},p(M,[z]){if(e=M,z&1&&L(h,e[0]),z&2&&L(_,e[1]),z&4&&L(p,e[2]),z&8){N=Mt(e[3]);let E;for(E=0;E<N.length;E+=1){const Ct=zt(e,N,E);x[E]?x[E].p(Ct,z):(x[E]=Vt(Ct),x[E].c(),x[E].m(j,null))}for(;E<x.length;E+=1)x[E].d(1);x.length=N.length}},i:tt,o:tt,d(M){M&&yt(t),Xt(x,M),ht=!1,it(bt)}}}function $e(e,t,i){let s=[],a=.05,c=1,u=1,n=[],r=!0,o=()=>{console.log("paused")};Qt(()=>{const m=new G.System({tickRate:60,friction:.1,gravity:0,collisionInfo:{cellSize:6},render:{canvas:document.getElementById("canvas"),background:"white"}});i(4,o=()=>{r?r=!1:r=!0});function b(){const g=new G.Circle({form:{vertices:[new G.Vector(0,0)]},radius:10,mass:10,speed:1,rotate:!1,elasticity:1,angularSpeed:1},m);return m.addEntity(g),s.push(g),g.velocity=new G.Vector(10,0).rotate(Math.random()*Math.PI*2),g}for(let v=0;v<1;v++)b();const _=()=>a,P=()=>c;setInterval(()=>{s.forEach(v=>{if(v!=null){for(v.acceleration=v.velocity.orthogonal.normalize().scale(_());s.length<P();){let g=b(),p=800;g.position=new G.Vector(Math.random()*p-p/2,Math.random()*p-p/2)}for(;s.length>P();){let g=s.pop();g.position=new G.Vector(1e4,0),m.removeEntity(g);let R=[...m.entities].filter(k=>k!=null);m.entities=R}v.rendering.hooks&&(v.rendering.hooks.postRender=(g,p)=>{p.strokeStyle="green",p.lineWidth=3,p.beginPath(),p.moveTo(g.position.x,-g.position.y),p.lineTo(g.position.x+g.acceleration.x*1e3,-g.position.y-g.acceleration.y*1e3),p.stroke(),p.strokeStyle="blue",p.lineWidth=6,p.beginPath(),p.moveTo(g.position.x,-g.position.y),p.lineTo(g.position.x+g.velocity.x*100,-g.position.y-g.velocity.y*100),p.stroke()}),v.velocity.add(v.acceleration),v.velocity=v.velocity.normalize().scale(u)}})},Math.floor(1e3/60)),setInterval(()=>{r&&(n.push([s[0].position.x,s[0].position.y,s[0].velocity.x,s[0].velocity.y,s[0].acceleration.x,s[0].acceleration.y]),i(3,n=[...n]))},100)});function l(){a=dt(this.value),i(0,a)}function h(){c=dt(this.value),i(1,c)}function f(){u=dt(this.value),i(2,u)}return[a,c,u,n,o,l,h,f]}class Ie extends ce{constructor(t){super(),ae(this,t,$e,Pe,Gt,{})}}new Ie({target:document.getElementById("app")});
